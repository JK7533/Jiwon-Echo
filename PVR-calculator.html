<!-- PVR Calculator Section -->
<div class="calculator-section">
    <h2>Pulmonary Vascular Resistance Calculator</h2>
    
    <div class="method-tabs">
        <div class="tab active" onclick="switchPVRTab('simplified')">Simplified Method</div>
        <div class="tab" onclick="switchPVRTab('abbas')">Abbas Formula</div>
    </div>

    <!-- Simplified Method -->
    <div id="pvr-simplified" class="tab-content active">
        <h3>Simplified Method</h3>
        <div class="formula">
            PVR = (Peak TR velocity × 10) / RVOT VTI
        </div>
        
        <div class="input-group">
            <label for="pvrTrVelocity">Peak TR Velocity:</label>
            <input type="number" id="pvrTrVelocity" step="0.1" placeholder="e.g. 3.2">
            <span class="unit">m/s</span>
        </div>
        
        <div class="input-group">
            <label for="pvrRvotVti">RVOT VTI:</label>
            <input type="number" id="pvrRvotVti" step="0.1" placeholder="e.g. 18">
            <span class="unit">cm</span>
        </div>
        
        <button class="calculate-btn" onclick="calculatePVRSimplified()">Calculate PVR</button>
    </div>

    <!-- Abbas Formula -->
    <div id="pvr-abbas" class="tab-content">
        <h3>Abbas Formula</h3>
        <div class="formula">
            PVR = 0.16 × (Peak TR velocity)² + 0.34
        </div>
        
        <div class="input-group">
            <label for="pvrAbbasTR">Peak TR Velocity:</label>
            <input type="number" id="pvrAbbasTR" step="0.1" placeholder="e.g. 3.2">
            <span class="unit">m/s</span>
        </div>
        
        <button class="calculate-btn" onclick="calculatePVRAbbas()">Calculate PVR</button>
    </div>

    <div id="pvrResults"></div>
</div>

<!-- PVR Reference Table -->
<div class="calculator-section reference-table">
    <h3>PVR Reference Ranges</h3>
    <table>
        <tr>
            <th>Range</th>
            <th>PVR (Wood Units)</th>
            <th>PVR (dyn·s·cm⁻⁵)</th>
            <th>Interpretation</th>
        </tr>
        <tr>
            <td><strong>Normal</strong></td>
            <td>&lt; 2.0</td>
            <td>&lt; 160</td>
            <td>Within reference range; low probability of pulmonary vascular disease</td>
        </tr>
        <tr>
            <td><strong>Mildly Elevated</strong></td>
            <td>2.0 - 4.0</td>
            <td>160 - 320</td>
            <td>May suggest early or borderline pulmonary vascular disease</td>
        </tr>
        <tr>
            <td><strong>Moderately Elevated</strong></td>
            <td>4.0 - 8.0</td>
            <td>320 - 640</td>
            <td>Consistent with pulmonary hypertension</td>
        </tr>
        <tr>
            <td><strong>Severely Elevated</strong></td>
            <td>&gt; 8.0</td>
            <td>&gt; 640</td>
            <td>Marked elevation; severe pulmonary vascular disease</td>
        </tr>
    </table>
</div>

<!-- Clinical Notes -->
<div class="calculator-section">
    <h3>Clinical Notes</h3>
    <ul>
        <li><strong>Simplified method:</strong> Best correlation when RVOT VTI is available and TR jet is well-defined.</li>
        <li><strong>Abbas formula:</strong> Validated in patients with pulmonary hypertension; useful if severe TR is present.</li>
        <li><strong>Conversion:</strong> Wood Units × 80 = dyn·s·cm⁻⁵</li>
        
</div>

<!-- CSS/JS: Use your previous styles and JS, but update the text in the interpretPVR function like so: -->

<script>
function interpretPVR(pvr) {
    if (pvr < 2.0) {
        return {
            class: 'normal',
            text: `Within reference range (low probability of pulmonary vascular disease)`
        };
    } else if (pvr < 4.0) {
        return {
            class: 'mild',
            text: `Mildly elevated (may suggest early pulmonary vascular disease)`
        };
    } else if (pvr < 8.0) {
        return {
            class: 'moderate',
            text: `Moderately elevated (consistent with pulmonary hypertension)`
        };
    } else {
        return {
            class: 'severe',
            text: `Severely elevated (marked pulmonary vascular disease)`
        };
    }
}
</script>
